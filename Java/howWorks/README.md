# 자바는 어떻게 돌아가나?
## JVM
- java 파일을 컴파일하면 class 파일(바이트코드)가 나온다.
- 위의 바이트 코드를 기계에 맞게 돌려주는 역할을 함
- 바이트 코드를 실행하는 표준이자 구현체를 지칭
- 이 표준에 맞는 언어를 구동하는 환경도 제공된다.(코틀린, 스칼라 등)
- javap -c {클래스파일명} <- 이 명령어를 통해 바이트코드를 볼 수 있다.

## JRE
- JVM + 라이브러리
- 자바 애플리케이션을 실행할 수 있도록 구성된 배포판.
- 핵심 라이브러리가 포함되어 있다는 게 특징
- 개발툴(javac 같은 거)는 엄슴.
- 이건 말 그대로 '실행'만을 위한 녀석
- 이제는 역사의 뒤안길로(요즘은 별 구분 없다)

## JDK
- JRE + 개발툴

## JVM 구조 (jvmStructure)
### 1. 클래스 로더 시스템
- .class에서 바이트코드를 읽고 메모리에 저장
- 로딩: 클래스를 읽어옴
- 링크: 레퍼런스 연결
- 초기화: static 값 초기화 + 변수 할당

### 2. 메모리
- 공유 자원: 메소드, 힙
- 스레드 단위 공유: 스택, PC, 네이티브 메소드 스택

#### 2.1 메소드
- 클래스 수준의 정보를 저장한다.
- 클래스 이름, 부모 클래스 이름, 메소드, 변수 저장한다는 얘기다
- 공유되는 자원임

#### 2.2 힙
- 객체를 저장
- 공유되는 자원임

#### 2.3 스택
- 스레드마다 런타임 스택을 만들어줌
- 요 안에다 메소드 호출을 스택 프레임이라는 블럭으로 쌓아놓는다.
- 당연히 스레드 죽으면 런타임 스택도 사라진다.

#### 2.4 PC
- 스레드마다 생겨남
- 현재 실행할 스택 프레임이 누구인지 알려주는 녀석

#### 2.5 네이티브 메소드 스택
- 얘도 스래드마다 생겨남
- 네이티브 메소드를 사용할 때 쌓인다.
    - 네이티브 메소드: C나 C++로 만들어진 놈들. native 키워드가 붙어있다.
- 실행 엔진, 네이티브 메소드 인터페이스와 메모리 영역을 연결시켜준다.
